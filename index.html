<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeadHope - Tableau de Bord de Survie</title>
    <style>
        :root {
            --dark-bg: #0d1117;
            --medium-bg: #161b22;
            --light-bg: #21262d;
            --accent: #ff4500;
            --accent-hover: #ff6a33;
            --text: #e6edf3;
            --text-dim: #8b949e;
            --border: #30363d;
            --danger: #ff4136;
            --warning: #ffcc00;
            --success: #2ecc40;
            --info: #39cccc;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: var(--dark-bg);
            color: var(--text);
            line-height: 1.6;
            padding: 0;
            margin: 0;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="0" y="0" width="100" height="100" fill="%230d1117"/><path d="M0 10L100 10M0 30L100 30M0 50L100 50M0 70L100 70M0 90L100 90M10 0L10 100M30 0L30 100M50 0L50 100M70 0L70 100M90 0L90 100" stroke="%23242a33" stroke-width="0.5"/></svg>');
            background-attachment: fixed;
        }
        
        header {
            background-color: var(--medium-bg);
            position: relative;
            text-align: center;
            border-bottom: 4px solid var(--accent);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            padding: 0;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect x="0" y="0" width="200" height="200" fill="%23161b22"/><path d="M0 50L200 50M0 100L200 100M0 150L200 150M50 0L50 200M100 0L100 200M150 0L150 200" stroke="%23242a33" stroke-width="1"/></svg>');
            opacity: 0.3;
            z-index: -1;
        }
        
        .header-overlay {
            background: rgba(22, 27, 34, 0.7);
            padding: 1.5rem;
            position: relative;
        }
        
        header h1 {
            font-size: 3.5rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.8), 0 0 10px rgba(255, 69, 0, 0.6);
            color: var(--accent);
            font-family: 'Impact', sans-serif;
            z-index: 5;
            position: relative;
        }
        
        header p {
            font-size: 1.2rem;
            color: var(--text);
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            z-index: 5;
            position: relative;
        }
        
        nav {
            background-color: var(--light-bg);
            padding: 0.5rem;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            position: sticky;
            top: 101px; /* Ajust√© pour s'adapter √† la hauteur du header */
            z-index: 90;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border-bottom: 1px solid var(--border);
        }
        
        nav a {
            color: var(--text);
            text-decoration: none;
            padding: 0.7rem 1.2rem;
            margin: 0.25rem;
            border-radius: 5px;
            background-color: var(--medium-bg);
            transition: all 0.3s ease;
            border: 1px solid var(--border);
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 1px;
            font-weight: bold;
            text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.5);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        nav a:hover {
            background-color: var(--accent);
            color: #000;
            transform: translateY(-3px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.4);
        }
        
        main {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 1rem;
        }
        
        .section {
            background-color: var(--medium-bg);
            border-radius: 8px;
            margin-bottom: 2rem;
            overflow: hidden;
            border: 1px solid var(--border);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .section:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .section-header {
            background: linear-gradient(to right, var(--light-bg), var(--medium-bg));
            color: var(--accent);
            padding: 1rem 1.2rem;
            font-size: 1.3rem;
            border-bottom: 2px solid var(--accent);
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        .section-header h2 {
            font-family: 'Impact', sans-serif;
            letter-spacing: 1px;
        }
        
        .section-header button {
            background: none;
            border: none;
            color: var(--text);
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            width: 30px;
            height: 30px;
            border-radius: 50%;
        }
        
        .section-header button:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--accent);
        }
        
        .section-content {
            padding: 1.5rem;
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }
        
        table, th, td {
            border: 1px solid var(--border);
        }
        
        th {
            background-color: var(--light-bg);
            padding: 0.75rem;
            text-align: left;
            text-transform: uppercase;
            font-size: 0.9rem;
            letter-spacing: 1px;
            color: var(--accent);
        }
        
        td {
            padding: 0.75rem;
            background-color: var(--medium-bg);
        }
        
        tr:nth-child(even) td {
            background-color: rgba(13, 17, 23, 0.5);
        }
        
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
        }
        
        .card {
            background-color: var(--medium-bg);
            border-radius: 8px;
            padding: 1.2rem;
            border: 1px solid var(--border);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
        }
        
        .card h3 {
            color: var(--accent);
            margin-bottom: 0.8rem;
            border-bottom: 1px solid var(--border);
            padding-bottom: 0.5rem;
            font-family: 'Impact', sans-serif;
            letter-spacing: 1px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }
        
        input, textarea, select {
            width: 100%;
            padding: 0.7rem;
            margin-bottom: 1rem;
            background-color: var(--dark-bg);
            border: 1px solid var(--border);
            color: var(--text);
            border-radius: 5px;
            transition: all 0.3s ease;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        input:focus, textarea:focus, select:focus {
            border-color: var(--accent);
            outline: none;
            box-shadow: 0 0 0 2px rgba(255, 69, 0, 0.2), inset 0 1px 3px rgba(0, 0, 0, 0.3);
        }
        
        button {
            background: linear-gradient(to bottom, var(--accent), #e03e00);
            color: #000;
            border: none;
            padding: 0.7rem 1.2rem;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        button:hover {
            background: linear-gradient(to bottom, var(--accent-hover), var(--accent));
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        }
        
        .coords-input {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }
        
        .coords-input input {
            width: 80px;
        }

        .mission-item {
            display: flex;
            align-items: center;
            margin-bottom: 0.8rem;
            background-color: rgba(13, 17, 23, 0.5);
            padding: 0.8rem;
            border-radius: 5px;
            border: 1px solid var(--border);
        }
        
        .mission-item input[type="checkbox"] {
            width: auto;
            margin-right: 0.8rem;
            transform: scale(1.2);
        }
        
        .danger-zone {
            background-color: rgba(255, 65, 54, 0.1);
            border: 1px solid var(--danger);
            border-radius: 5px;
            padding: 1.2rem;
            margin-top: 1.5rem;
            box-shadow: 0 0 10px rgba(255, 65, 54, 0.2);
        }
        
        .status-indicator {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 0.5rem;
            box-shadow: 0 0 5px currentColor;
        }
        
        .status-good {
            background-color: var(--success);
        }
        
        .status-warning {
            background-color: var(--warning);
        }
        
        .status-danger {
            background-color: var(--danger);
        }
        
        .status-unknown {
            background-color: var(--text-dim);
        }
        
        .resource-bar {
            height: 24px;
            background-color: var(--dark-bg);
            border-radius: 12px;
            margin-bottom: 0.8rem;
            overflow: hidden;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
            position: relative;
        }
        
        .resource-bar-fill {
            height: 100%;
            transition: width 0.5s ease, background-color 0.5s ease;
        }
        
        .resource-bar-fill.high {
            background: linear-gradient(to right, #2ecc40, #39d353);
            box-shadow: 0 0 8px rgba(46, 204, 64, 0.5);
        }
        
        .resource-bar-fill.medium {
            background: linear-gradient(to right, #ffcc00, #ffdd33);
            box-shadow: 0 0 8px rgba(255, 204, 0, 0.5);
        }
        
        .resource-bar-fill.low {
            background: linear-gradient(to right, #ff4136, #ff6b5b);
            box-shadow: 0 0 8px rgba(255, 65, 54, 0.5);
        }
        
        .resource-level-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #000;
            font-weight: bold;
            text-shadow: 0 0 2px rgba(255, 255, 255, 0.8);
        }
        
        .priority-stars {
            color: var(--warning);
            letter-spacing: 2px;
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
        }
        
        .low-resource-warning {
            display: none;
            background-color: rgba(255, 65, 54, 0.1);
            border: 1px solid var(--danger);
            border-radius: 5px;
            padding: 0.5rem;
            margin-top: 0.5rem;
            color: var(--danger);
            font-weight: bold;
            text-align: center;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 65, 54, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(255, 65, 54, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 65, 54, 0); }
        }
        
        footer {
            text-align: center;
            padding: 1.5rem;
            background-color: var(--medium-bg);
            color: var(--text-dim);
            margin-top: 3rem;
            border-top: 1px solid var(--border);
            box-shadow: 0 -4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        footer::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><rect x="0" y="0" width="200" height="200" fill="%23161b22"/><path d="M0 50L200 50M0 100L200 100M0 150L200 150M50 0L50 200M100 0L100 200M150 0L150 200" stroke="%23242a33" stroke-width="1"/></svg>');
            opacity: 0.1;
            z-index: -1;
        }
        
        .emergency-codes {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 0.8rem;
        }
        
        .code {
            padding: 0.8rem;
            border-radius: 5px;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            transition: transform 0.3s ease;
        }
        
        .code:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        
        .code-red {
            background-color: rgba(255, 0, 0, 0.15);
            border: 1px solid #ff0000;
            box-shadow: 0 0 8px rgba(255, 0, 0, 0.2);
        }
        
        .code-orange {
            background-color: rgba(255, 165, 0, 0.15);
            border: 1px solid #ffa500;
            box-shadow: 0 0 8px rgba(255, 165, 0, 0.2);
        }
        
        .code-yellow {
            background-color: rgba(255, 255, 0, 0.15);
            border: 1px solid #ffff00;
            box-shadow: 0 0 8px rgba(255, 255, 0, 0.2);
        }
        
        .code-green {
            background-color: rgba(0, 128, 0, 0.15);
            border: 1px solid #008000;
            box-shadow: 0 0 8px rgba(0, 128, 0, 0.2);
        }
        
        .code-blue {
            background-color: rgba(0, 0, 255, 0.15);
            border: 1px solid #0000ff;
            box-shadow: 0 0 8px rgba(0, 0, 255, 0.2);
        }
        
        .code-black {
            background-color: rgba(0, 0, 0, 0.3);
            border: 1px solid #000000;
            box-shadow: 0 0 8px rgba(255, 255, 255, 0.1);
        }
        
        .tips-list li {
            margin-bottom: 0.8rem;
            list-style-type: none;
            position: relative;
            padding-left: 1.5rem;
        }
        
        .tips-list li::before {
            content: "‚ñ∂";
            color: var(--accent);
            position: absolute;
            left: 0;
        }
        
        .mobile-toggle {
            display: none;
            background: linear-gradient(to bottom, var(--accent), #e03e00);
            color: black;
            padding: 0.8rem;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        .base-location {
            display: block;
            color: var(--accent);
            font-style: italic;
            margin-top: 0.3rem;
            font-size: 0.9rem;
        }
        
        .resource-priority {
            display: flex;
            align-items: center;
            margin-top: 0.5rem;
            justify-content: space-between;
        }
        
        .priority-selector {
            display: flex;
            align-items: center;
        }
        
        .priority-selector label {
            margin-right: 0.5rem;
        }
        
        .star-toggle {
            background: none;
            border: none;
            color: var(--text-dim);
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 0 2px;
        }
        
        .star-toggle.active {
            color: var(--warning);
            text-shadow: 0 0 5px rgba(255, 204, 0, 0.5);
        }
        
        .star-toggle:hover {
            transform: scale(1.2);
        }
        
        .notification-area {
            position: fixed;
            bottom: 20px;
            right: 20px;
            max-width: 300px;
            z-index: 1000;
        }
        
        .notification {
            background-color: var(--light-bg);
            border-left: 4px solid var(--danger);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
            animation: slideIn 0.5s ease forwards, fadeOut 0.5s ease 5s forwards;
            transform: translateX(120%);
            opacity: 0;
        }
        
        @keyframes slideIn {
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes fadeOut {
            to { opacity: 0; transform: translateX(120%); }
        }
        
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                display: none;
                position: static;
            }
            
            nav.show {
                display: flex;
            }
            
            .mobile-toggle {
                display: block;
            }
            
            .grid {
                grid-template-columns: 1fr;
            }
            
            header h1 {
                font-size: 2.5rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .section-header h2 {
                font-size: 1.2rem;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease;
        }
        
        .blood-splatter {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0.05;
            z-index: -1;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 400 400"><circle cx="100" cy="100" r="50" fill="%23ff0000" filter="blur(10px)"/><circle cx="300" cy="150" r="40" fill="%23ff0000" filter="blur(8px)"/><circle cx="150" cy="300" r="60" fill="%23ff0000" filter="blur(12px)"/><circle cx="250" cy="250" r="30" fill="%23ff0000" filter="blur(6px)"/></svg>');
        }
        
        .footer-logo {
            font-size: 2.5rem;
            margin-top: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8), 0 0 8px rgba(255, 69, 0, 0.6);
            color: var(--accent);
            font-family: 'Impact', sans-serif;
        }
    </style>
</head>
<body>
    <div class="blood-splatter"></div>
    <header>
        <div class="header-overlay">
            <h1>DEADHOPE</h1>
            <p>Tableau de Bord de Survie - Project Zomboid</p>
        </div>
    </header>
    
    <div class="mobile-toggle" onclick="toggleNav()">‚ò∞ MENU</div>
    
    <nav id="main-nav">
        <a href="#map">Carte</a>
        <a href="#team">√âquipe</a>
        <a href="#missions">Missions</a>
        <a href="#resources">Ressources</a>
        <a href="#construction">Construction</a>
        <a href="#vehicles">V√©hicules</a>
        <a href="#skills">Comp√©tences</a>
        <a href="#calendar">Calendrier</a>
        <a href="#security">S√©curit√©</a>
        <a href="#journal">Journal</a>
        <a href="#relations">Relations</a>
        <a href="#emergency">Urgences</a>
    </nav>
    
    <main>
        <section id="map" class="section fade-in">
            <div class="section-header">
                <h2>üß≠ CARTE STRAT√âGIQUE</h2>
                <button onclick="toggleSection('map-content')">-</button>
            </div>
        </section>
        
        <section id="relations" class="section fade-in">
            <div class="section-header">
                <h2>üë• RELATIONS AVEC D'AUTRES GROUPES</h2>
                <button onclick="toggleSection('relations-content')">-</button>
            </div>
            <div class="section-content" id="relations-content">
                <table>
                    <thead>
                        <tr>
                            <th>GROUPE</th>
                            <th>LOCALISATION</th>
                            <th>RELATION</th>
                            <th>CONTACT PRINCIPAL</th>
                            <th>NOTES</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Nom du groupe"></td>
                            <td><input type="text" placeholder="Localisation"></td>
                            <td>
                                <select>
                                    <option value="ally">Alli√©</option>
                                    <option value="friendly">Amical</option>
                                    <option value="neutral">Neutre</option>
                                    <option value="hostile">Hostile</option>
                                    <option value="enemy">Ennemi</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Nom du contact"></td>
                            <td><input type="text" placeholder="Informations importantes"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du groupe"></td>
                            <td><input type="text" placeholder="Localisation"></td>
                            <td>
                                <select>
                                    <option value="ally">Alli√©</option>
                                    <option value="friendly">Amical</option>
                                    <option value="neutral">Neutre</option>
                                    <option value="hostile">Hostile</option>
                                    <option value="enemy">Ennemi</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Nom du contact"></td>
                            <td><input type="text" placeholder="Informations importantes"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du groupe"></td>
                            <td><input type="text" placeholder="Localisation"></td>
                            <td>
                                <select>
                                    <option value="ally">Alli√©</option>
                                    <option value="friendly">Amical</option>
                                    <option value="neutral">Neutre</option>
                                    <option value="hostile">Hostile</option>
                                    <option value="enemy">Ennemi</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Nom du contact"></td>
                            <td><input type="text" placeholder="Informations importantes"></td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 style="margin-top: 2rem;">ACCORDS ET √âCHANGES</h3>
                <table>
                    <thead>
                        <tr>
                            <th>GROUPE</th>
                            <th>TYPE D'ACCORD</th>
                            <th>TERMES</th>
                            <th>STATUT</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner un groupe --</option>
                                    <option value="group1">Groupe 1</option>
                                    <option value="group2">Groupe 2</option>
                                    <option value="group3">Groupe 3</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="trade">√âchange commercial</option>
                                    <option value="defense">D√©fense mutuelle</option>
                                    <option value="territory">Territoire</option>
                                    <option value="assistance">Assistance</option>
                                    <option value="nonaggression">Non-agression</option>
                                </select>
                            </td>
                            <td><textarea placeholder="D√©tails de l'accord"></textarea></td>
                            <td>
                                <select>
                                    <option value="proposed">Propos√©</option>
                                    <option value="active">Actif</option>
                                    <option value="expired">Expir√©</option>
                                    <option value="violated">Viol√©</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner un groupe --</option>
                                    <option value="group1">Groupe 1</option>
                                    <option value="group2">Groupe 2</option>
                                    <option value="group3">Groupe 3</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="trade">√âchange commercial</option>
                                    <option value="defense">D√©fense mutuelle</option>
                                    <option value="territory">Territoire</option>
                                    <option value="assistance">Assistance</option>
                                    <option value="nonaggression">Non-agression</option>
                                </select>
                            </td>
                            <td><textarea placeholder="D√©tails de l'accord"></textarea></td>
                            <td>
                                <select>
                                    <option value="proposed">Propos√©</option>
                                    <option value="active">Actif</option>
                                    <option value="expired">Expir√©</option>
                                    <option value="violated">Viol√©</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <button style="margin-top: 1rem;">+ Ajouter un groupe</button>
            </div>
        </section>
        
    </main>
    
    <footer>
        <p>DeadHope - Tableau de Bord de Survie | V1.0</p>
        <div class="footer-logo">DEADHOPE</div>
        <p style="margin-top: 1rem;">&copy; 2023 - Tous droits r√©serv√©s</p>
    </footer>
    
    <div class="notification-area"></div>
    
    <script>
        // Fonction pour toggle nav
        function toggleNav() {
            const nav = document.getElementById('main-nav');
            nav.classList.toggle('show');
        }
        
        // Fonction pour toggle section
        function toggleSection(id) {
            const content = document.getElementById(id);
            const button = content.previousElementSibling.querySelector('button');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                button.textContent = '-';
            } else {
                content.style.display = 'none';
                button.textContent = '+';
            }
        }
        
        // Fonction pour mettre √† jour la barre de ressource
        function updateResourceBar(barId, value) {
            const bar = document.getElementById(barId);
            const resourceName = barId.split('-')[0];
            const warningElement = document.getElementById(resourceName + '-warning');
            
            // Limiter la valeur entre 0 et 100
            const level = Math.max(0, Math.min(100, value));
            
            // Mettre √† jour la largeur de la barre
            bar.style.width = level + '%';
            
            // Mettre √† jour le texte du niveau
            bar.parentElement.querySelector('.resource-level-text').textContent = level + '%';
            
            // D√©terminer la couleur de la barre en fonction du niveau
            bar.classList.remove('high', 'medium', 'low');
            if (level >= 70) {
                bar.classList.add('high');
                warningElement.style.display = 'none';
            } else if (level >= 40) {
                bar.classList.add('medium');
                warningElement.style.display = 'none';
            } else {
                bar.classList.add('low');
                warningElement.style.display = 'block';
                
                // Afficher une notification si le niveau est critique
                if (level < 30) {
                    showNotification('‚ö†Ô∏è ' + resourceName.toUpperCase() + ' en niveau critique (' + level + '%) !');
                }
            }
        }
        
        // Fonction pour basculer les √©toiles de priorit√©
        function toggleStar(element, index, resourceName) {
            const stars = element.parentElement.querySelectorAll('.star-toggle');
            
            if (index === 0 && !element.classList.contains('active')) {
                // Activer la premi√®re √©toile si elle est d√©sactiv√©e
                element.classList.add('active');
            } else if (index === stars.length - 1 && element.classList.contains('active')) {
                // D√©sactiver la derni√®re √©toile si elle est activ√©e
                element.classList.remove('active');
            } else if (element.classList.contains('active')) {
                // Si l'√©toile actuelle est active, d√©sactiver toutes les √©toiles apr√®s
                for (let i = index; i < stars.length; i++) {
                    stars[i].classList.remove('active');
                }
            } else {
                // Si l'√©toile actuelle est inactive, activer toutes les √©toiles avant
                for (let i = 0; i <= index; i++) {
                    stars[i].classList.add('active');
                }
            }
            
            // Compter le nombre d'√©toiles actives
            const activeStars = element.parentElement.querySelectorAll('.star-toggle.active').length;
            const resourceDisplayName = {
                'food': 'Nourriture',
                'meds': 'M√©dicaments',
                'ammo': 'Munitions',
                'fuel': 'Carburant'
            }[resourceName] || resourceName;
            
            showNotification('‚≠ê Priorit√© de ' + resourceDisplayName + ' mise √† jour : ' + activeStars + ' √©toiles');
        }
        
        // Fonction pour sauvegarder les donn√©es
        function saveData() {
            const inputs = document.querySelectorAll('input, textarea, select');
            const data = {};
            
            inputs.forEach((input, index) => {
                if (input.type === 'checkbox') {
                    data[`input-${index}`] = input.checked;
                } else if (input.type === 'select-multiple') {
                    const selectedOptions = Array.from(input.selectedOptions).map(option => option.value);
                    data[`input-${index}`] = selectedOptions;
                } else {
                    data[`input-${index}`] = input.value;
                }
            });
            
            // Sauvegarder √©galement l'√©tat des barres de ressources
            const resources = ['food', 'meds', 'ammo', 'fuel'];
            resources.forEach(resource => {
                const bar = document.getElementById(resource + '-bar');
                if (bar) {
                    data[resource + '-width'] = bar.style.width;
                    data[resource + '-class'] = Array.from(bar.classList).filter(c => c !== 'resource-bar-fill').join(' ');
                }
                
                // Sauvegarde des √©toiles de priorit√©
                const stars = document.querySelectorAll(`.priority-selector button[onclick*="${resource}"]`);
                if (stars.length > 0) {
                    data[resource + '-stars'] = Array.from(stars).map(star => star.classList.contains('active')).join(',');
                }
            });
            
            localStorage.setItem('deadhope-data', JSON.stringify(data));
            showNotification('‚úÖ Donn√©es sauvegard√©es avec succ√®s !');
        }
        
        // Fonction pour charger les donn√©es
        function loadData() {
            const saved = localStorage.getItem('deadhope-data');
            if (saved) {
                const data = JSON.parse(saved);
                const inputs = document.querySelectorAll('input, textarea, select');
                
                inputs.forEach((input, index) => {
                    const value = data[`input-${index}`];
                    if (value !== undefined) {
                        if (input.type === 'checkbox') {
                            input.checked = value;
                        } else if (input.type === 'select-multiple') {
                            if (Array.isArray(value)) {
                                value.forEach(val => {
                                    for (let i = 0; i < input.options.length; i++) {
                                        if (input.options[i].value === val) {
                                            input.options[i].selected = true;
                                        }
                                    }
                                });
                            }
                        } else {
                            input.value = value;
                        }
                    }
                });
                
                // Charger l'√©tat des barres de ressources
                const resources = ['food', 'meds', 'ammo', 'fuel'];
                resources.forEach(resource => {
                    const bar = document.getElementById(resource + '-bar');
                    if (bar && data[resource + '-width']) {
                        bar.style.width = data[resource + '-width'];
                        
                        // Restaurer la classe (couleur)
                        bar.classList.remove('high', 'medium', 'low');
                        if (data[resource + '-class']) {
                            data[resource + '-class'].split(' ').forEach(cls => {
                                if (cls) bar.classList.add(cls);
                            });
                        }
                        
                        // Mettre √† jour le texte
                        const textElement = bar.parentElement.querySelector('.resource-level-text');
                        if (textElement) {
                            textElement.textContent = data[resource + '-width'];
                        }
                        
                        // Afficher/masquer les avertissements
                        const warningElement = document.getElementById(resource + '-warning');
                        if (warningElement) {
                            const level = parseInt(data[resource + '-width']);
                            warningElement.style.display = level < 40 ? 'block' : 'none';
                        }
                    }
                    
                    // Restaurer les √©toiles de priorit√©
                    if (data[resource + '-stars']) {
                        const starStates = data[resource + '-stars'].split(',').map(s => s === 'true');
                        const stars = document.querySelectorAll(`.priority-selector button[onclick*="${resource}"]`);
                        stars.forEach((star, i) => {
                            if (starStates[i]) {
                                star.classList.add('active');
                            } else {
                                star.classList.remove('active');
                            }
                        });
                    }
                });
                
                showNotification('üìÇ Donn√©es charg√©es avec succ√®s !');
            } else {
                showNotification('‚ö†Ô∏è Aucune donn√©e sauvegard√©e trouv√©e !');
            }
        }
        
        // Fonction pour afficher une notification
        function showNotification(message) {
            const notificationArea = document.querySelector('.notification-area');
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.textContent = message;
            notificationArea.appendChild(notification);
            
            // Supprimer la notification apr√®s 5.5 secondes
            setTimeout(() => {
                notification.remove();
            }, 5500);
        }
        
        // Ajouter des boutons de sauvegarde et de chargement au menu
        document.addEventListener('DOMContentLoaded', function() {
            // V√©rifier tous les niveaux de ressources au chargement
            const resources = ['food', 'meds', 'ammo', 'fuel'];
            resources.forEach(resource => {
                const quantityInput = document.getElementById(resource + '-quantity');
                if (quantityInput) {
                    updateResourceBar(resource + '-bar', quantityInput.value);
                }
            });
            
            // Ajouter les boutons au menu
            const nav = document.getElementById('main-nav');
            if (nav) {
                const saveButton = document.createElement('a');
                saveButton.href = '#';
                saveButton.textContent = 'üíæ Sauvegarder';
                saveButton.style.backgroundColor = '#2ecc40';
                saveButton.onclick = function(e) {
                    e.preventDefault();
                    saveData();
                };
                
                const loadButton = document.createElement('a');
                loadButton.href = '#';
                loadButton.textContent = 'üìÇ Charger';
                loadButton.style.backgroundColor = '#3498db';
                loadButton.onclick = function(e) {
                    e.preventDefault();
                    loadData();
                };
                
                nav.appendChild(saveButton);
                nav.appendChild(loadButton);
            }
            
            // Afficher un message de bienvenue
            setTimeout(() => {
                showNotification('üßü‚Äç‚ôÇÔ∏è Bienvenue sur le Tableau de Bord DeadHope !');
            }, 1000);
        });
    </script>
</body>
</html>
        
        <section id="emergency" class="section fade-in">
            <div class="section-header">
                <h2>üö® PROTOCOLES D'URGENCE</h2>
                <button onclick="toggleSection('emergency-content')">-</button>
            </div>
            <div class="section-content" id="emergency-content">
                <h3>CODES DE SITUATION</h3>
                <div class="emergency-codes">
                    <div class="code code-red">
                        CODE ROUGE: Attaque massive de zombies, tous au point de ralliement
                    </div>
                    <div class="code code-orange">
                        CODE ORANGE: Intrusion humaine hostile, postes de d√©fense
                    </div>
                    <div class="code code-yellow">
                        CODE JAUNE: Alerte m√©dicale, se r√©f√©rer au m√©decin en chef
                    </div>
                    <div class="code code-green">
                        CODE VERT: √âvacuation imm√©diate, route ouest
                    </div>
                    <div class="code code-blue">
                        CODE BLEU: Ressources critiques, rationnement strict
                    </div>
                    <div class="code code-black">
                        CODE NOIR: Dernier recours, chacun pour soi
                    </div>
                </div>
                
                <h3 style="margin-top: 2rem;">POINTS DE RALLIEMENT</h3>
                <table>
                    <thead>
                        <tr>
                            <th>NOM</th>
                            <th>LOCALISATION</th>
                            <th>UTILISER SI</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Nom de la zone"></td>
                            <td>
                                <select>
                                    <option value="fence">Cl√¥ture</option>
                                    <option value="wall">Mur</option>
                                    <option value="barricade">Barricade</option>
                                    <option value="trap">Pi√®ges</option>
                                    <option value="guard">Surveillance</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="perfect">Parfait</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                    <option value="breached">Br√®che</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom de la zone"></td>
                            <td>
                                <select>
                                    <option value="fence">Cl√¥ture</option>
                                    <option value="wall">Mur</option>
                                    <option value="barricade">Barricade</option>
                                    <option value="trap">Pi√®ges</option>
                                    <option value="guard">Surveillance</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="perfect">Parfait</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                    <option value="breached">Br√®che</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom de la zone"></td>
                            <td>
                                <select>
                                    <option value="fence">Cl√¥ture</option>
                                    <option value="wall">Mur</option>
                                    <option value="barricade">Barricade</option>
                                    <option value="trap">Pi√®ges</option>
                                    <option value="guard">Surveillance</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="perfect">Parfait</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                    <option value="breached">Br√®che</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="danger-zone" style="margin-top: 2rem;">
                    <h3>PROTOCOLE D'INTRUSION</h3>
                    <p>En cas d'intrusion hostile (humaine ou zombie), veuillez suivre les √©tapes suivantes:</p>
                    <ol style="margin-top: 1rem; margin-left: 1.5rem;">
                        <li>Alerter tous les membres pr√©sents via le syst√®me d'alarme</li>
                        <li>√âvacuer les non-combattants vers le bunker de s√©curit√©</li>
                        <li>Prendre position aux points de d√©fense d√©sign√©s</li>
                        <li>Utiliser uniquement des armes silencieuses si possible</li>
                        <li>En cas d'√©chec de la d√©fense, se replier selon le plan d'√©vacuation</li>
                    </ol>
                </div>
            </div>
        </section>
        
        <section id="journal" class="section fade-in">
            <div class="section-header">
                <h2>üìù JOURNAL DE BORD</h2>
                <button onclick="toggleSection('journal-content')">-</button>
            </div>
            <div class="section-content" id="journal-content">
                <div style="display: flex; gap: 1rem; margin-bottom: 1rem;">
                    <input type="date" style="width: 200px;">
                    <input type="text" placeholder="Titre de l'entr√©e" style="flex-grow: 1;">
                </div>
                <textarea placeholder="D√©taillez les √©v√©nements importants de la journ√©e, d√©couvertes, pertes, etc." style="height: 150px; margin-bottom: 1.5rem;"></textarea>
                
                <h3>ENTR√âES PR√âC√âDENTES</h3>
                <table>
                    <thead>
                        <tr>
                            <th>DATE</th>
                            <th>AUTEUR</th>
                            <th>TITRE</th>
                            <th>ACTIONS</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>2023-04-12</td>
                            <td>
                                <select>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" value="Premier jour √† la base"></td>
                            <td>
                                <button style="padding: 0.3rem 0.6rem; margin-right: 0.5rem;">Voir</button>
                                <button style="padding: 0.3rem 0.6rem;">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>2023-04-11</td>
                            <td>
                                <select>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" value="Exploration du magasin"></td>
                            <td>
                                <button style="padding: 0.3rem 0.6rem; margin-right: 0.5rem;">Voir</button>
                                <button style="padding: 0.3rem 0.6rem;">Supprimer</button>
                            </td>
                        </tr>
                        <tr>
                            <td>2023-04-10</td>
                            <td>
                                <select>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" value="Construction de la palissade sud"></td>
                            <td>
                                <button style="padding: 0.3rem 0.6rem; margin-right: 0.5rem;">Voir</button>
                                <button style="padding: 0.3rem 0.6rem;">Supprimer</button>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <button style="margin-top: 1rem;">Enregistrer l'entr√©e</button>
            </div>
        </section>
                
                <h3 style="margin-top: 2rem;">TOURS DE GARDE</h3>
                <table>
                    <thead>
                        <tr>
                            <th>HEURE</th>
                            <th>RESPONSABLE</th>
                            <th>POSTE</th>
                            <th>NOTES</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <select>
                                    <option value="night">Nuit (00h-08h)</option>
                                    <option value="morning">Matin (08h-16h)</option>
                                    <option value="evening">Soir (16h-00h)</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Poste de garde"></td>
                            <td><input type="text" placeholder="Notes sp√©ciales"></td>
                        </tr>
                        <tr>
                            <td>
                                <select>
                                    <option value="night">Nuit (00h-08h)</option>
                                    <option value="morning">Matin (08h-16h)</option>
                                    <option value="evening">Soir (16h-00h)</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Poste de garde"></td>
                            <td><input type="text" placeholder="Notes sp√©ciales"></td>
                        </tr>
                        <tr>
                            <td>
                                <select>
                                    <option value="night">Nuit (00h-08h)</option>
                                    <option value="morning">Matin (08h-16h)</option>
                                    <option value="evening">Soir (16h-00h)</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Poste de garde"></td>
                            <td><input type="text" placeholder="Notes sp√©ciales"></td>
                        </tr>
                    </tbody>
                </table>
                    <tbody>
                        <tr>
                            <td>Combat</td>
                            <td>
                                <select multiple>
                                    <option value="beginner">D√©butant</option>
                                    <option value="intermediate" selected>Interm√©diaire</option>
                                    <option value="advanced">Avanc√©</option>
                                    <option value="expert">Expert</option>
                                    <option value="master">Ma√Ætre</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="high">‚≠ê‚≠ê‚≠ê Haute</option>
                                    <option value="medium" selected>‚≠ê‚≠ê Moyenne</option>
                                    <option value="low">‚≠ê Basse</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Premiers soins</td>
                            <td>
                                <select multiple>
                                    <option value="beginner">D√©butant</option>
                                    <option value="intermediate">Interm√©diaire</option>
                                    <option value="advanced" selected>Avanc√©</option>
                                    <option value="expert">Expert</option>
                                    <option value="master">Ma√Ætre</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="high" selected>‚≠ê‚≠ê‚≠ê Haute</option>
                                    <option value="medium">‚≠ê‚≠ê Moyenne</option>
                                    <option value="low">‚≠ê Basse</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Agriculture</td>
                            <td>
                                <select multiple>
                                    <option value="beginner" selected>D√©butant</option>
                                    <option value="intermediate">Interm√©diaire</option>
                                    <option value="advanced">Avanc√©</option>
                                    <option value="expert">Expert</option>
                                    <option value="master">Ma√Ætre</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="high" selected>‚≠ê‚≠ê‚≠ê Haute</option>
                                    <option value="medium">‚≠ê‚≠ê Moyenne</option>
                                    <option value="low">‚≠ê Basse</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 style="margin-top: 2rem;">T√ÇCHES R√âCURRENTES</h3>
                <table>
                    <thead>
                        <tr>
                            <th>T√ÇCHE</th>
                            <th>FR√âQUENCE</th>
                            <th>RESPONSABLE</th>
                            <th>DERNI√àRE EX√âCUTION</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Description de la t√¢che"></td>
                            <td>
                                <select>
                                    <option value="daily">Quotidienne</option>
                                    <option value="weekly">Hebdomadaire</option>
                                    <option value="monthly">Mensuelle</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Description de la t√¢che"></td>
                            <td>
                                <select>
                                    <option value="daily">Quotidienne</option>
                                    <option value="weekly">Hebdomadaire</option>
                                    <option value="monthly">Mensuelle</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Description de la t√¢che"></td>
                            <td>
                                <select>
                                    <option value="daily">Quotidienne</option>
                                    <option value="weekly">Hebdomadaire</option>
                                    <option value="monthly">Mensuelle</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                            <td><input type="date"></td>
                        </tr>
                    </tbody>
                </table>
                
                <button style="margin-top: 1rem;">+ Ajouter une t√¢che r√©currente</button>
            </div>
        </section>
        
        <section id="security" class="section fade-in">
            <div class="section-header">
                <h2>üîí S√âCURIT√â</h2>
                <button onclick="toggleSection('security-content')">-</button>
            </div>
            <div class="section-content" id="security-content">
                <h3>√âTAT DES D√âFENSES</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ZONE</th>
                            <th>TYPE DE D√âFENSE</th>
                            <th>√âTAT</th>
                            <th>DERNI√àRE INSPECTION</th>
                        </tr>
                    </thead>
                
                <button style="margin-top: 1rem;">+ Ajouter une comp√©tence</button>
            </div>
        </section>
        
        <section id="calendar" class="section fade-in">
            <div class="section-header">
                <h2>üìÖ CALENDRIER DE SURVIE</h2>
                <button onclick="toggleSection('calendar-content')">-</button>
            </div>
            <div class="section-content" id="calendar-content">
                <h3>√âV√âNEMENTS IMPORTANTS</h3>
                <table>
                    <thead>
                        <tr>
                            <th>DATE</th>
                            <th>√âV√âNEMENT</th>
                            <th>NOTES</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="date"></td>
                            <td><input type="text" placeholder="Description de l'√©v√©nement"></td>
                            <td><input type="text" placeholder="Notes suppl√©mentaires"></td>
                        </tr>
                        <tr>
                            <td><input type="date"></td>
                            <td><input type="text" placeholder="Description de l'√©v√©nement"></td>
                            <td><input type="text" placeholder="Notes suppl√©mentaires"></td>
                        </tr>
                        <tr>
                            <td><input type="date"></td>
                            <td><input type="text" placeholder="Description de l'√©v√©nement"></td>
                            <td><input type="text" placeholder="Notes suppl√©mentaires"></td>
                        </tr>
                    </tbody>
                </table>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Ex: En cas d'incendie, inondation, etc."></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du point"></td>
                            <td><input type="text" placeholder="Coordonn√©es/Description"></td>
                            <td><input type="text" placeholder="Ex: En cas d'incendie, inondation, etc."></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du point"></td>
                            <td><input type="text" placeholder="Coordonn√©es/Description"></td>
                            <td><input type="text" placeholder="Ex: En cas d'incendie, inondation, etc."></td>
                        </tr>
                    </tbody>
                </table>
                
                <h3 style="margin-top: 2rem;">CONSEILS DE SURVIE</h3>
                <ul class="tips-list">
                    <li>Toujours pr√©venir un membre de l'√©quipe avant de partir en mission</li>
                    <li>Garder une marge de s√©curit√© de 25% de carburant pour le retour</li>
                    <li>Ne jamais s'aventurer seul dans une zone non explor√©e</li>
                    <li>En cas de morsure, isoler imm√©diatement le membre concern√©</li>
                    <li>Maintenir une distance de s√©curit√© avec les zombies - frapper et reculer</li>
                    <li>Toujours emporter une arme secondaire silencieuse</li>
                    <li>√âviter de courir sauf en cas d'urgence absolue</li>
                </ul>
            </div>
        </section>
        
        <section id="skills" class="section fade-in">
            <div class="section-header">
                <h2>üß† COMP√âTENCES ET FORMATIONS</h2>
                <button onclick="toggleSection('skills-content')">-</button>
            </div>
            <div class="section-content" id="skills-content">
                <table>
                    <thead>
                        <tr>
                            <th>COMP√âTENCE</th>
                            <th>NIVEAU DANS L'√âQUIPE</th>
                            <th>EXPERT</th>
                            <th>PRIORIT√â DE FORMATION</th>
                        </tr>
                    </thead>="Nom du point"></td>
                            <td><input type="text" placeholder="Coordonn√©es/Description"></td>
                            <td><input type="text" placeholder
        </section>
        
        <section id="construction" class="section fade-in">
            <div class="section-header">
                <h2>üîß PROJETS DE CONSTRUCTION</h2>
                <button onclick="toggleSection('construction-content')">-</button>
            </div>
            <div class="section-content" id="construction-content">
                <table>
                    <thead>
                        <tr>
                            <th>PROJET</th>
                            <th>MAT√âRIAUX REQUIS</th>
                            <th>√âTAT</th>
                            <th>RESPONSABLE</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Nom du projet"></td>
                            <td><textarea placeholder="Liste des mat√©riaux n√©cessaires"></textarea></td>
                            <td>
                                <select>
                                    <option value="planning">Planification</option>
                                    <option value="gathering">Collecte</option>
                                    <option value="building">En construction</option>
                                    <option value="finished">Termin√©</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du projet"></td>
                            <td><textarea placeholder="Liste des mat√©riaux n√©cessaires"></textarea></td>
                            <td>
                                <select>
                                    <option value="planning">Planification</option>
                                    <option value="gathering">Collecte</option>
                                    <option value="building">En construction</option>
                                    <option value="finished">Termin√©</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du projet"></td>
                            <td><textarea placeholder="Liste des mat√©riaux n√©cessaires"></textarea></td>
                            <td>
                                <select>
                                    <option value="planning">Planification</option>
                                    <option value="gathering">Collecte</option>
                                    <option value="building">En construction</option>
                                    <option value="finished">Termin√©</option>
                                </select>
                            </td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <button style="margin-top: 1rem;">+ Ajouter un projet</button>
            </div>
        </section>
        
        <section id="vehicles" class="section fade-in">
            <div class="section-header">
                <h2>üöô V√âHICULES</h2>
                <button onclick="toggleSection('vehicles-content')">-</button>
            </div>
            <div class="section-content" id="vehicles-content">
                <table>
                    <thead>
                        <tr>
                            <th>V√âHICULE</th>
                            <th>√âTAT</th>
                            <th>CARBURANT</th>
                            <th>LOCALISATION</th>
                            <th>CL√âS AVEC</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" placeholder="Type/Couleur du v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="excellent">Excellent</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                </select>
                            </td>
                            <td>
                                <input type="range" min="0" max="100" value="50">
                                <div style="text-align: center;"><span>50%</span></div>
                            </td>
                            <td><input type="text" placeholder="O√π est gar√© le v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                    <option value="garage">Au garage</option>
                                    <option value="lost">Perdues</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Type/Couleur du v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="excellent">Excellent</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                </select>
                            </td>
                            <td>
                                <input type="range" min="0" max="100" value="25">
                                <div style="text-align: center;"><span>25%</span></div>
                            </td>
                            <td><input type="text" placeholder="O√π est gar√© le v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                    <option value="garage">Au garage</option>
                                    <option value="lost">Perdues</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Type/Couleur du v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="excellent">Excellent</option>
                                    <option value="good">Bon</option>
                                    <option value="damaged">Endommag√©</option>
                                    <option value="critical">Critique</option>
                                </select>
                            </td>
                            <td>
                                <input type="range" min="0" max="100" value="75">
                                <div style="text-align: center;"><span>75%</span></div>
                            </td>
                            <td><input type="text" placeholder="O√π est gar√© le v√©hicule"></td>
                            <td>
                                <select>
                                    <option value="">-- S√©lectionner --</option>
                                    <option value="player1">Joueur 1</option>
                                    <option value="player2">Joueur 2</option>
                                    <option value="player3">Joueur 3</option>
                                    <option value="garage">Au garage</option>
                                    <option value="lost">Perdues</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
                
                <button style="margin-top: 1rem;">+ Ajouter un v√©hicule</button>
            </div>
            <!-- Dans la section "map-content" de votre HTML existant -->
<div class="section-content" id="map-content">
    <div class="map-container">
        <div id="pz-map-wrapper">
            <div id="pz-map-controls">
                <div class="map-tools">
                    <button id="tool-marker" title="Ajouter un marqueur" class="map-tool-btn"><i class="marker-icon">üìç</i></button>
                    <button id="tool-area" title="Dessiner une zone" class="map-tool-btn"><i class="area-icon">‚¨ö</i></button>
                    <button id="tool-path" title="Tracer un chemin" class="map-tool-btn"><i class="path-icon">‚û∞</i></button>
                    <button id="tool-text" title="Ajouter du texte" class="map-tool-btn"><i class="text-icon">A</i></button>
                    <button id="tool-delete" title="Supprimer un √©l√©ment" class="map-tool-btn"><i class="delete-icon">üóëÔ∏è</i></button>
                </div>
                <div class="map-options">
                    <select id="marker-type">
                        <option value="safe">Lieu s√ªr</option>
                        <option value="danger">Zone dangereuse</option>
                        <option value="loot">Butin int√©ressant</option>
                        <option value="explored">Explor√©</option>
                        <option value="base">Base/Avant-poste</option>
                        <option value="medical">M√©dical</option>
                        <option value="food">Nourriture</option>
                        <option value="weapons">Armes</option>
                        <option value="fuel">Carburant</option>
                    </select>
                    <div class="color-selector">
                        <input type="color" id="element-color" value="#ff4500">
                        <label for="element-color">Couleur</label>
                    </div>
                </div>
                <div class="map-locations">
                    <select id="map-location-select">
                        <option value="muldraugh">Muldraugh</option>
                        <option value="westpoint">West Point</option>
                        <option value="rosewood">Rosewood</option>
                        <option value="riverside">Riverside</option>
                        <option value="louisville">Louisville</option>
                    </select>
                </div>
            </div>
            <div id="pz-map" class="pz-map">
                <!-- Remplac√© l'image par un canvas uniquement -->
                <canvas id="map-canvas"></canvas>
                <div id="map-elements"></div>
            </div>
            <div class="map-legend">
                <h4>L√©gende</h4>
                <div class="legend-item"><span class="legend-color" style="background-color: #ff4500;"></span> Zone dangereuse</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #2ecc40;"></span> Zone s√ªre</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #0074d9;"></span> Point d'int√©r√™t</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #ffdc00;"></span> Ressources</div>
                <div class="legend-item"><span class="legend-color" style="background-color: #b10dc9;"></span> Base/Avant-poste</div>
            </div>
        </div>
    </div>
    
    <div class="map-coordinates">
        <div>Position actuelle: <span id="current-coordinates">X: 0, Y: 0</span></div>
        <div>
            <label for="goto-x">Aller √†:</label>
            <input type="number" id="goto-x" placeholder="X" min="0" max="20000">
            <input type="number" id="goto-y" placeholder="Y" min="0" max="20000">
            <button id="goto-coords">Go</button>
        </div>
    </div>
    
    <div class="map-saved-locations">
        <h3>Emplacements Sauvegard√©s</h3>
        <div class="saved-locations-list" id="saved-locations">
            <!-- Les emplacements sauvegard√©s seront charg√©s ici -->
        </div>
        <div class="save-location-form">
            <input type="text" id="location-name" placeholder="Nom de l'emplacement">
            <input type="text" id="location-desc" placeholder="Description (optionnel)">
            <button id="save-current-location">Sauvegarder l'emplacement actuel</button>
        </div>
    </div>
    
    <!-- Reste de votre contenu map-content existant -->
    <h3 style="margin-top: 2rem;">ZONES DANGEREUSES</h3>
    <table>
        <thead>
            <tr>
                <th>LIEU</th>
                <th>DENSIT√â ZOMBIE</th>
                <th>NOTES</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><input type="text" placeholder="Nom du lieu"></td>
                <td>
                    <select>
                        <option value="1">‚≠ê Faible</option>
                        <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                    </select>
                </td>
                <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
            </tr>
            <tr>
                <td><input type="text" placeholder="Nom du lieu"></td>
                <td>
                    <select>
                        <option value="1">‚≠ê Faible</option>
                        <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                    </select>
                </td>
                <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
            </tr>
            <tr>
                <td><input type="text" placeholder="Nom du lieu"></td>
                <td>
                    <select>
                        <option value="1">‚≠ê Faible</option>
                        <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                        <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                        <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                        <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                    </select>
                </td>
                <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
            </tr>
        </tbody>
    </table>
</div>

<!-- Ajouter ces styles √† votre CSS existant -->
<style>
    .map-container {
        width: 100%;
        margin-bottom: 2rem;
        background-color: var(--medium-bg);
        border-radius: 8px;
        border: 1px solid var(--border);
        overflow: hidden;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    
    #pz-map-wrapper {
        position: relative;
    }
    
    #pz-map {
        width: 100%;
        height: 600px;
        position: relative;
        overflow: hidden;
        background-color: var(--dark-bg);
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect x="0" y="0" width="100" height="100" fill="%230d1117"/><path d="M0 10L100 10M0 30L100 30M0 50L100 50M0 70L100 70M0 90L100 90M10 0L10 100M30 0L30 100M50 0L50 100M70 0L70 100M90 0L90 100" stroke="%23242a33" stroke-width="0.5"/></svg>');
        box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.5);
    }
    
    #map-canvas {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 10;
    }
    
    #map-elements {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 20;
        pointer-events: none;
    }
    
    #pz-map-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem;
        background-color: var(--light-bg);
        border-bottom: 1px solid var(--border);
    }
    
    .map-tools {
        display: flex;
        gap: 0.5rem;
    }
    
    .map-tool-btn {
        width: 40px !important;
        height: 40px !important;
        display: flex !important;
        align-items: center !important;
        justify-content: center !important;
        background-color: var(--medium-bg) !important;
        border: 1px solid var(--border) !important;
        border-radius: 5px !important;
        cursor: pointer !important;
        color: var(--text) !important;
        transition: all 0.3s ease !important;
        padding: 0 !important;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
    }
    
    .map-tool-btn:hover {
        background-color: var(--light-bg) !important;
        color: var(--accent) !important;
        transform: translateY(-2px) !important;
    }
    
    .map-tool-btn.active {
        background-color: var(--accent) !important;
        color: black !important;
        box-shadow: 0 0 8px rgba(255, 69, 0, 0.5) !important;
    }
    
    .map-tool-btn i {
        font-size: 18px !important;
        font-style: normal !important;
    }
    
    .map-options {
        display: flex;
        gap: 1rem;
        align-items: center;
    }
    
    .map-options select, 
    .map-locations select {
        background-color: var(--medium-bg);
        border: 1px solid var(--border);
        color: var(--text);
        padding: 0.5rem;
        border-radius: 5px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    
    .color-selector {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .color-selector input[type="color"] {
        width: 30px;
        height: 30px;
        border: none;
        border-radius: 5px;
        background: none;
        cursor: pointer;
    }
    
    .map-legend {
        padding: 0.75rem;
        background-color: var(--medium-bg);
        border-top: 1px solid var(--border);
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 1rem;
    }
    
    .map-legend h4 {
        margin: 0;
        margin-right: 1rem;
        color: var(--accent);
    }
    
    .legend-item {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .legend-color {
        width: 15px;
        height: 15px;
        border-radius: 50%;
        display: inline-block;
        box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
    }
    
    .map-coordinates {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-top: 1rem;
        background-color: var(--medium-bg);
        padding: 0.75rem;
        border-radius: 5px;
        border: 1px solid var(--border);
    }
    
    .map-coordinates input[type="number"] {
        width: 80px;
        margin: 0 0.5rem;
    }
    
    .map-saved-locations {
        margin-top: 1rem;
        background-color: var(--medium-bg);
        padding: 1rem;
        border-radius: 5px;
        border: 1px solid var(--border);
    }
    
    .saved-locations-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 0.75rem;
        margin: 1rem 0;
    }
    
    .saved-location-item {
        background-color: var(--light-bg);
        border: 1px solid var(--border);
        border-radius: 5px;
        padding: 0.75rem;
        cursor: pointer;
        transition: all 0.3s ease;
    }
    
    .saved-location-item:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
    }
    
    .saved-location-name {
        font-weight: bold;
        color: var(--accent);
    }
    
    .saved-location-coords {
        font-size: 0.85rem;
        color: var(--text-dim);
    }
    
    .saved-location-desc {
        margin-top: 0.5rem;
        font-size: 0.9rem;
    }
    
    .save-location-form {
        display: flex;
        gap: 0.5rem;
        margin-top: 1rem;
    }
    
    .marker {
        position: absolute;
        width: 26px;
        height: 26px;
        cursor: pointer;
        z-index: 30;
        transform: translate(-50%, -100%);
        pointer-events: auto;
    }
    
    .area {
        position: absolute;
        background-color: rgba(255, 69, 0, 0.25);
        border: 2px solid #ff4500;
        z-index: 25;
        pointer-events: auto;
        cursor: move;
    }
    
    .path {
        z-index: 25;
        pointer-events: auto;
        cursor: pointer;
    }
    
    .map-text {
        position: absolute;
        z-index: 30;
        pointer-events: auto;
        cursor: move;
        background-color: rgba(0, 0, 0, 0.6);
        padding: 5px 8px;
        border-radius: 3px;
        white-space: nowrap;
    }
    
    .small-button {
        padding: 0.3rem 0.6rem;
        margin-top: 0.5rem;
        font-size: 0.8rem;
    }
</style>

<!-- Ajouter ce script √† la fin de votre body ou dans la section script -->
<script>
// Donn√©es et √©tat de la carte
const mapState = {
    currentTool: null,
    elements: [],
    selectedElement: null,
    drawing: false,
    tempElement: null,
    markers: [],
    areas: [],
    paths: [],
    texts: [],
    mapCenter: { x: 10000, y: 10000 }, // Centre par d√©faut
    zoom: 1,
    dragging: false,
    dragStart: { x: 0, y: 0 },
    dragEnd: { x: 0, y: 0 },
    mapSize: { width: 20000, height: 20000 } // Taille totale de la carte PZ
};

// Initialisation des √©l√©ments DOM
document.addEventListener('DOMContentLoaded', function() {
    // R√©cup√©rer les √©l√©ments DOM
    const mapCanvas = document.getElementById('map-canvas');
    const mapElements = document.getElementById('map-elements');
    const toolButtons = document.querySelectorAll('.map-tool-btn');
    const markerTypeSelect = document.getElementById('marker-type');
    const elementColorInput = document.getElementById('element-color');
    const locationSelect = document.getElementById('map-location-select');
    const currentCoordsSpan = document.getElementById('current-coordinates');
    const gotoXInput = document.getElementById('goto-x');
    const gotoYInput = document.getElementById('goto-y');
    const gotoButton = document.getElementById('goto-coords');
    const saveLocationButton = document.getElementById('save-current-location');
    const locationNameInput = document.getElementById('location-name');
    const locationDescInput = document.getElementById('location-desc');
    const savedLocationsDiv = document.getElementById('saved-locations');
    
    // Configuration du canvas
    const ctx = mapCanvas.getContext('2d');
    resizeCanvas();
    
    // Chargement de la carte
    loadMap(locationSelect.value);
    
    // Chargement des donn√©es sauvegard√©es
    loadMapData();
    
    // Gestion des √©v√©nements pour les outils
    toolButtons.forEach(button => {
        button.addEventListener('click', function() {
            // D√©s√©lectionner tous les boutons
            toolButtons.forEach(btn => btn.classList.remove('active'));
            
            // Si le m√™me outil est cliqu√© deux fois, le d√©sactiver
            if (mapState.currentTool === this.id.replace('tool-', '')) {
                mapState.currentTool = null;
            } else {
                // Activer le nouvel outil
                this.classList.add('active');
                mapState.currentTool = this.id.replace('tool-', '');
            }
            
            // R√©initialiser l'√©l√©ment temporaire
            mapState.tempElement = null;
            mapState.drawing = false;
        });
    });
    
    // √âv√©nements pour le canvas de la carte
    mapCanvas.addEventListener('mousedown', handleMouseDown);
    mapCanvas.addEventListener('mousemove', handleMouseMove);
    mapCanvas.addEventListener('mouseup', handleMouseUp);
    mapCanvas.addEventListener('wheel', handleMouseWheel);
    mapCanvas.addEventListener('contextmenu', function(e) {
        e.preventDefault(); // Emp√™cher le menu contextuel du clic droit
    });
    
    // √âv√©nement pour aller √† des coordonn√©es sp√©cifiques
    gotoButton.addEventListener('click', function() {
        const x = parseInt(gotoXInput.value);
        const y = parseInt(gotoYInput.value);
        if (!isNaN(x) && !isNaN(y)) {
            mapState.mapCenter = { x, y };
            renderMap();
        }
    });
    
    // √âv√©nement pour changer de carte
    locationSelect.addEventListener('change', function() {
        loadMap(this.value);
    });
    
    // √âv√©nement pour sauvegarder un emplacement
    saveLocationButton.addEventListener('click', function() {
        const name = locationNameInput.value.trim();
        if (name) {
            saveLocation(name, locationDescInput.value, mapState.mapCenter);
            locationNameInput.value = '';
            locationDescInput.value = '';
        }
    });
    
    // Fonction pour redimensionner le canvas
    function resizeCanvas() {
        const container = mapCanvas.parentElement;
        mapCanvas.width = container.offsetWidth;
        mapCanvas.height = container.offsetHeight;
        renderMap();
    }
    
    // √âv√©nement pour redimensionner la fen√™tre
    window.addEventListener('resize', resizeCanvas);
    
    // Fonction pour charger une carte
    function loadMap(location) {
        // Dans une impl√©mentation r√©elle, cela chargerait une carte diff√©rente
        // Pour ce prototype, nous allons juste changer le centre de la carte
        switch(location) {
            case 'muldraugh':
                mapState.mapCenter = { x: 10700, y: 9800 };
                break;
            case 'westpoint':
                mapState.mapCenter = { x: 12000, y: 6800 };
                break;
            case 'rosewood':
                mapState.mapCenter = { x: 8100, y: 11800 };
                break;
            case 'riverside':
                mapState.mapCenter = { x: 6200, y: 5400 };
                break;
            case 'louisville':
                mapState.mapCenter = { x: 12500, y: 3500 };
                break;
        }
        renderMap();
        showNotification(`üß≠ Carte centr√©e sur ${location}`);
    }
    
    // Fonction pour g√©rer le clic sur la carte
    function handleMouseDown(e) {
        const rect = mapCanvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        // Convertir les coordonn√©es d'affichage en coordonn√©es de la carte
        const mapX = (x - mapCanvas.width / 2) / mapState.zoom + mapState.mapCenter.x;
        const mapY = (y - mapCanvas.height / 2) / mapState.zoom + mapState.mapCenter.y;
        
        if (mapState.currentTool === 'marker') {
            // Cr√©er un nouveau marqueur
            const marker = {
                type: 'marker',
                x: mapX,
                y: mapY,
                markerType: markerTypeSelect.value,
                color: elementColorInput.value,
                id: Date.now().toString()
            };
            mapState.markers.push(marker);
            createMarkerDOM(marker);
            saveMapData();
            showNotification(`üìç Marqueur ajout√© √† X: ${Math.floor(mapX)}, Y: ${Math.floor(mapY)}`);
        } else if (mapState.currentTool === 'area') {
            // Commencer √† dessiner une zone
            mapState.drawing = true;
            mapState.tempElement = {
                type: 'area',
                startX: mapX,
                startY: mapY,
                width: 0,
                height: 0,
                color: elementColorInput.value,
                id: Date.now().toString()
            };
        } else if (mapState.currentTool === 'path') {
            // Commencer ou continuer √† dessiner un chemin
            if (!mapState.drawing) {
                mapState.drawing = true;
                mapState.tempElement = {
                    type: 'path',
                    points: [{ x: mapX, y: mapY }],
                    color: elementColorInput.value,
                    id: Date.now().toString()
                };
                showNotification("üõ£Ô∏è Trac√© commenc√© - Clic gauche pour ajouter des points, clic droit pour terminer");
            } else {
                // Ajouter un point au chemin si c'est un clic gauche
                if (e.button === 0) {
                    mapState.tempElement.points.push({ x: mapX, y: mapY });
                    renderMap();
                } else if (e.button === 2) {
                    // Finaliser le chemin avec le clic droit
                    if (mapState.tempElement.points.length > 1) {
                        mapState.paths.push(mapState.tempElement);
                        createPathDOM(mapState.tempElement);
                        mapState.drawing = false;
                        mapState.tempElement = null;
                        saveMapData();
                        showNotification("üõ£Ô∏è Trac√© termin√©");
                    }
                }
            }
        } else if (mapState.currentTool === 'text') {
            // Ajouter du texte
            const text = prompt("Entrez votre texte:");
            if (text) {
                const textElement = {
                    type: 'text',
                    x: mapX,
                    y: mapY,
                    text: text,
                    color: elementColorInput.value,
                    id: Date.now().toString()
                };
                mapState.texts.push(textElement);
                createTextDOM(textElement);
                saveMapData();
                showNotification(`üìù Texte ajout√©: "${text.substring(0, 20)}${text.length > 20 ? '...' : ''}"`);
            }
        } else if (mapState.currentTool === 'delete') {
            // La suppression est g√©r√©e par les √©v√©nements des √©l√©ments eux-m√™mes
            showNotification("üóëÔ∏è Cliquez sur un √©l√©ment pour le supprimer");
        } else {
            // D√©placement de la carte (panoramique)
            mapState.dragging = true;
            mapState.dragStart = { x: e.clientX, y: e.clientY };
        }
    }
    
    // Fonction pour g√©rer le mouvement de la souris
    function handleMouseMove(e) {
        const rect = mapCanvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        
        // Convertir les coordonn√©es d'affichage en coordonn√©es de la carte
        const mapX = (x - mapCanvas.width / 2) / mapState.zoom + mapState.mapCenter.x;
        const mapY = (y - mapCanvas.height / 2) / mapState.zoom + mapState.mapCenter.y;
        
        // Mettre √† jour les coordonn√©es affich√©es
        currentCoordsSpan.textContent = `X: ${Math.floor(mapX)}, Y: ${Math.floor(mapY)}`;
        
        if (mapState.dragging) {
            // D√©placer la carte
            const dx = e.clientX - mapState.dragStart.x;
            const dy = e.clientY - mapState.dragStart.y;
            
            mapState.mapCenter.x -= dx / mapState.zoom;
            mapState.mapCenter.y -= dy / mapState.zoom;
            
            mapState.dragStart = { x: e.clientX, y: e.clientY };
            renderMap();
        } else if (mapState.drawing && mapState.tempElement) {
            if (mapState.tempElement.type === 'area') {
                // Mettre √† jour les dimensions de la zone
                mapState.tempElement.width = mapX - mapState.tempElement.startX;
                mapState.tempElement.height = mapY - mapState.tempElement.startY;
                renderMap();
                drawArea(ctx, {
                    x: mapState.tempElement.startX,
                    y: mapState.tempElement.startY,
                    width: mapState.tempElement.width,
                    height: mapState.tempElement.height,
                    color: mapState.tempElement.color
                });
            } else if (mapState.tempElement.type === 'path') {
                // Pr√©visualiser la ligne jusqu'au curseur
                renderMap();
                
                const ctx = mapCanvas.getContext('2d');
                ctx.beginPath();
                ctx.strokeStyle = mapState.tempElement.color;
                ctx.lineWidth = 3;
                
                // Dessiner le chemin existant
                const points = mapState.tempElement.points;
                if (points.length > 0) {
                    const firstPoint = points[0];
                    const screenX1 = mapToScreenX(firstPoint.x);
                    const screenY1 = mapToScreenY(firstPoint.y);
                    
                    ctx.moveTo(screenX1, screenY1);
                    
                    for (let i = 1; i < points.length; i++) {
                        const point = points[i];
                        const screenX = mapToScreenX(point.x);
                        const screenY = mapToScreenY(point.y);
                        ctx.lineTo(screenX, screenY);
                    }
                    
                    // Dessiner la ligne vers le curseur
                    const screenX = mapToScreenX(mapX);
                    const screenY = mapToScreenY(mapY);
                    ctx.lineTo(screenX, screenY);
                }
                
                ctx.stroke();
            }
        }
    }
    
    // Fonction pour g√©rer le rel√¢chement de la souris
    function handleMouseUp(e) {
        if (mapState.drawing && mapState.tempElement) {
            if (mapState.tempElement.type === 'area') {
                // Finaliser la zone
                const area = {
                    type: 'area',
                    x: mapState.tempElement.startX,
                    y: mapState.tempElement.startY,
                    width: mapState.tempElement.width,
                    height: mapState.tempElement.height,
                    color: mapState.tempElement.color,
                    id: mapState.tempElement.id
                };
                
                // Normaliser les dimensions n√©gatives
                if (area.width < 0) {
                    area.x += area.width;
                    area.width = Math.abs(area.width);
                }
                if (area.height < 0) {
                    area.y += area.height;
                    area.height = Math.abs(area.height);
                }
                
                mapState.areas.push(area);
                createAreaDOM(area);
                mapState.drawing = false;
                mapState.tempElement = null;
                saveMapData();
                showNotification("üî≤ Zone cr√©√©e");
            }
        }
        
        mapState.dragging = false;
        renderMap();
    }
    
    // Fonction pour g√©rer le zoom avec la molette
    function handleMouseWheel(e) {
        e.preventDefault();
        const zoomFactor = e.deltaY > 0 ? 0.9 : 1.1;
        mapState.zoom *= zoomFactor;
        
        // Limiter le zoom
        mapState.zoom = Math.max(0.5, Math.min(3, mapState.zoom));
        
        renderMap();
    }
    
    // Fonction pour rendre la carte
    function renderMap() {
        ctx.clearRect(0, 0, mapCanvas.width, mapCanvas.height);
        
        // Dessiner une grille ou une image de fond
        drawGrid(ctx);
        
        // Dessiner les √©l√©ments
        mapState.areas.forEach(area => drawArea(ctx, area));
        mapState.paths.forEach(path => drawPath(ctx, path));
        
        // Dessiner l'√©l√©ment temporaire en cours de dessin
        if (mapState.tempElement) {
            if (mapState.tempElement.type === 'area') {
                drawArea(ctx, {
                    x: mapState.tempElement.startX,
                    y: mapState.tempElement.startY,
                    width: mapState.tempElement.width,
                    height: mapState.tempElement.height,
                    color: mapState.tempElement.color
                });
            } else if (mapState.tempElement.type === 'path') {
                drawPath(ctx, mapState.tempElement);
            }
        }
        
        // Mettre √† jour la position des marqueurs et textes DOM
        updateDOMElements();
    }
    
    // Fonction pour dessiner une grille
    function drawGrid(ctx) {
        // Calcul des limites visibles de la carte
        const visibleLeft = mapState.mapCenter.x - mapCanvas.width / (2 * mapState.zoom);
        const visibleTop = mapState.mapCenter.y - mapCanvas.height / (2 * mapState.zoom);
        const visibleRight = mapState.mapCenter.x + mapCanvas.width / (2 * mapState.zoom);
        const visibleBottom = mapState.mapCenter.y + mapCanvas.height / (2 * mapState.zoom);
        
        // Taille des cellules de la grille
        const gridSize = 500; // 500 unit√©s de carte
        
        // Dessiner les lignes verticales
        ctx.beginPath();
        ctx.strokeStyle = 'rgba(100, 100, 100, 0.3)';
        ctx.lineWidth = 1;
        
        const startX = Math.floor(visibleLeft / gridSize) * gridSize;
        for (let x = startX; x <= visibleRight; x += gridSize) {
            const screenX = mapToScreenX(x);
            ctx.moveTo(screenX, 0);
            ctx.lineTo(screenX, mapCanvas.height);
        }
        
        // Dessiner les lignes horizontales
        const startY = Math.floor(visibleTop / gridSize) * gridSize;
        for (let y = startY; y <= visibleBottom; y += gridSize) {
            const screenY = mapToScreenY(y);
            ctx.moveTo(0, screenY);
            ctx.lineTo(mapCanvas.width, screenY);
        }
        
        ctx.stroke();
        
        // Dessiner les principales coordonn√©es
        ctx.font = '12px Courier New';
        ctx.fillStyle = 'rgba(200, 200, 200, 0.7)';
        
        for (let x = startX; x <= visibleRight; x += gridSize) {
            for (let y = startY; y <= visibleBottom; y += gridSize) {
                const screenX = mapToScreenX(x);
                const screenY = mapToScreenY(y);
                ctx.fillText(`${x},${y}`, screenX + 5, screenY + 15);
            }
        }
        
        // Ajouter des rep√®res pour les villes principales
        const cities = [
            { name: "Muldraugh", x: 10700, y: 9800, color: "#ff4500" },
            { name: "West Point", x: 12000, y: 6800, color: "#2ecc40" },
            { name: "Rosewood", x: 8100, y: 11800, color: "#0074d9" },
            { name: "Riverside", x: 6200, y: 5400, color: "#ffdc00" },
            { name: "Louisville", x: 12500, y: 3500, color: "#b10dc9" }
        ];
        
        cities.forEach(city => {
            const screenX = mapToScreenX(city.x);
            const screenY = mapToScreenY(city.y);
            
            // V√©rifier si la ville est visible
            if (screenX >= 0 && screenX <= mapCanvas.width && screenY >= 0 && screenY <= mapCanvas.height) {
                // Dessiner un cercle pour marquer la ville
                ctx.beginPath();
                ctx.arc(screenX, screenY, 8, 0, 2 * Math.PI);
                ctx.fillStyle = city.color;
                ctx.fill();
                ctx.strokeStyle = "#fff";
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Ajouter le nom de la ville
                ctx.font = 'bold 14px Courier New';
                ctx.fillStyle = "#fff";
                ctx.textAlign = "center";
                ctx.fillText(city.name, screenX, screenY - 15);
                ctx.textAlign = "start";
            }
        });
    }
    
    // Fonction pour dessiner une zone
    function drawArea(ctx, area) {
        const screenX = mapToScreenX(area.x);
        const screenY = mapToScreenY(area.y);
        const screenWidth = area.width * mapState.zoom;
        const screenHeight = area.height * mapState.zoom;
        
        ctx.fillStyle = hexToRGBA(area.color, 0.25);
        ctx.strokeStyle = area.color;
        ctx.lineWidth = 2;
        
        ctx.fillRect(screenX, screenY, screenWidth, screenHeight);
        ctx.strokeRect(screenX, screenY, screenWidth, screenHeight);
    }
    
    // Fonction pour dessiner un chemin
    function drawPath(ctx, path) {
        if (!path.points || path.points.length < 2) return;
        
        ctx.beginPath();
        ctx.strokeStyle = path.color;
        ctx.lineWidth = 3;
        
        const screenX1 = mapToScreenX(path.points[0].x);
        const screenY1 = mapToScreenY(path.points[0].y);
        
        ctx.moveTo(screenX1, screenY1);
        
        for (let i = 1; i < path.points.length; i++) {
            const screenX = mapToScreenX(path.points[i].x);
            const screenY = mapToScreenY(path.points[i].y);
            ctx.lineTo(screenX, screenY);
        }
        
        ctx.stroke();
    }
    
    // Fonctions pour convertir entre les coordonn√©es de la carte et de l'√©cran
    function mapToScreenX(x) {
        return mapCanvas.width / 2 + (x - mapState.mapCenter.x) * mapState.zoom;
    }
    
    function mapToScreenY(y) {
        return mapCanvas.height / 2 + (y - mapState.mapCenter.y) * mapState.zoom;
    }
    
    function screenToMapX(x) {
        return (x - mapCanvas.width / 2) / mapState.zoom + mapState.mapCenter.x;
    }
    
    function screenToMapY(y) {
        return (y - mapCanvas.height / 2) / mapState.zoom + mapState.mapCenter.y;
    }
    
    // Fonction pour cr√©er un √©l√©ment DOM de marqueur
    function createMarkerDOM(marker) {
        const markerElem = document.createElement('div');
        markerElem.className = 'marker';
        markerElem.id = `marker-${marker.id}`;
        
        // Style du marqueur selon le type
        markerElem.innerHTML = getMarkerIcon(marker.markerType);
        markerElem.style.color = marker.color;
        
        // Positionnement initial
        updateMarkerPosition(markerElem, marker);
        
        // Ajouter la possibilit√© de d√©placer le marqueur
        markerElem.addEventListener('mousedown', function(e) {
            if (mapState.currentTool === 'delete') {
                // Supprimer le marqueur
                mapElements.removeChild(markerElem);
                mapState.markers = mapState.markers.filter(m => m.id !== marker.id);
                saveMapData();
                showNotification("üóëÔ∏è Marqueur supprim√©");
                return;
            }
            
            e.stopPropagation();
            const startX = e.clientX;
            const startY = e.clientY;
            
            function moveMarker(e) {
                const rect = mapCanvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Mettre √† jour les coordonn√©es
                marker.x = screenToMapX(x);
                marker.y = screenToMapY(y);
                
                // Mettre √† jour la position
                updateMarkerPosition(markerElem, marker);
            }
            
            function stopMoving() {
                document.removeEventListener('mousemove', moveMarker);
                document.removeEventListener('mouseup', stopMoving);
                saveMapData();
            }
            
            document.addEventListener('mousemove', moveMarker);
            document.addEventListener('mouseup', stopMoving);
        });
        
        // Tooltip avec coordonn√©es
        markerElem.title = `${getMarkerTypeName(marker.markerType)} (${Math.floor(marker.x)}, ${Math.floor(marker.y)})`;
        
        // Ajouter au DOM
        mapElements.appendChild(markerElem);
    }
    
    // Fonction pour mettre √† jour la position d'un marqueur DOM
    function updateMarkerPosition(markerElem, marker) {
        const screenX = mapToScreenX(marker.x);
        const screenY = mapToScreenY(marker.y);
        markerElem.style.left = `${screenX}px`;
        markerElem.style.top = `${screenY}px`;
    }
    
    // Fonction pour obtenir l'ic√¥ne d'un type de marqueur
    function getMarkerIcon(markerType) {
        switch(markerType) {
            case 'safe':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="currentColor"/><path d="M8 12l3 3 5-5" stroke="black" stroke-width="2" fill="none" /></svg>`;
            case 'danger':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="currentColor"/><path d="M12 7v6M12 16v1" stroke="black" stroke-width="2" /></svg>`;
            case 'loot':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M12 2L5 9h5v13h4V9h5L12 2z" stroke="black" stroke-width="1" /></svg>`;
            case 'explored':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="currentColor"/><circle cx="12" cy="12" r="4" stroke="black" stroke-width="2" fill="none" /></svg>`;
            case 'base':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M3 12h4v8h4v-6h2v6h4v-8h4L12 3 3 12z" stroke="black" stroke-width="1" /></svg>`;
            case 'medical':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="currentColor"/><path d="M8 12h8M12 8v8" stroke="black" stroke-width="2" /></svg>`;
            case 'food':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M6 3v18h4v-5h4v5h4V3H6z" stroke="black" stroke-width="1" /><path d="M10 8h4M10 12h4" stroke="black" stroke-width="1" /></svg>`;
            case 'weapons':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M4 20l16-16M14 6l4 4M8 16l-4 4" stroke="black" stroke-width="2" /></svg>`;
            case 'fuel':
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><path d="M4 6h8v12H4z M12 10h2v8h-2z M14 8h2v2h-2z M16 6h2v2h-2z M18 4h2v14h-2z" stroke="black" stroke-width="1" /></svg>`;
            default:
                return `<svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor"><circle cx="12" cy="12" r="10" stroke="black" stroke-width="2" fill="currentColor"/></svg>`;
        }
    }
    
    // Fonction pour obtenir le nom d'un type de marqueur
    function getMarkerTypeName(markerType) {
        switch(markerType) {
            case 'safe': return 'Lieu s√ªr';
            case 'danger': return 'Zone dangereuse';
            case 'loot': return 'Butin int√©ressant';
            case 'explored': return 'Explor√©';
            case 'base': return 'Base/Avant-poste';
            case 'medical': return 'M√©dical';
            case 'food': return 'Nourriture';
            case 'weapons': return 'Armes';
            case 'fuel': return 'Carburant';
            default: return 'Marqueur';
        }
    }
    
    // Fonction pour cr√©er un √©l√©ment DOM de zone
    function createAreaDOM(area) {
        const areaElem = document.createElement('div');
        areaElem.className = 'area';
        areaElem.id = `area-${area.id}`;
        
        // Style et position
        updateAreaDOM(areaElem, area);
        
        // Ajouter la possibilit√© de d√©placer la zone
        areaElem.addEventListener('mousedown', function(e) {
            if (mapState.currentTool === 'delete') {
                // Supprimer la zone
                mapElements.removeChild(areaElem);
                mapState.areas = mapState.areas.filter(a => a.id !== area.id);
                saveMapData();
                showNotification("üóëÔ∏è Zone supprim√©e");
                return;
            }
            
            e.stopPropagation();
            const startX = e.clientX;
            const startY = e.clientY;
            const startAreaX = area.x;
            const startAreaY = area.y;
            
            function moveArea(e) {
                const dx = (e.clientX - startX) / mapState.zoom;
                const dy = (e.clientY - startY) / mapState.zoom;
                
                area.x = startAreaX + dx;
                area.y = startAreaY + dy;
                
                updateAreaDOM(areaElem, area);
            }
            
            function stopMoving() {
                document.removeEventListener('mousemove', moveArea);
                document.removeEventListener('mouseup', stopMoving);
                saveMapData();
            }
            
            document.addEventListener('mousemove', moveArea);
            document.addEventListener('mouseup', stopMoving);
        });
        
        // Ajouter au DOM
        mapElements.appendChild(areaElem);
    }
    
    // Fonction pour mettre √† jour un √©l√©ment DOM de zone
    function updateAreaDOM(areaElem, area) {
        const screenX = mapToScreenX(area.x);
        const screenY = mapToScreenY(area.y);
        const screenWidth = area.width * mapState.zoom;
        const screenHeight = area.height * mapState.zoom;
        
        areaElem.style.left = `${screenX}px`;
        areaElem.style.top = `${screenY}px`;
        areaElem.style.width = `${Math.abs(screenWidth)}px`;
        areaElem.style.height = `${Math.abs(screenHeight)}px`;
        areaElem.style.backgroundColor = hexToRGBA(area.color, 0.25);
        areaElem.style.borderColor = area.color;
    }
    
    // Fonction pour cr√©er un √©l√©ment DOM de chemin
    function createPathDOM(path) {
        // Pour les chemins, on utilise un canevas SVG
        const svgNS = "http://www.w3.org/2000/svg";
        const pathElem = document.createElementNS(svgNS, "svg");
        pathElem.setAttribute("class", "path");
        pathElem.id = `path-${path.id}`;
        pathElem.style.position = "absolute";
        pathElem.style.top = "0";
        pathElem.style.left = "0";
        pathElem.style.width = "100%";
        pathElem.style.height = "100%";
        pathElem.style.pointerEvents = "none";
        
        const polyline = document.createElementNS(svgNS, "polyline");
        polyline.setAttribute("fill", "none");
        polyline.setAttribute("stroke", path.color);
        polyline.setAttribute("stroke-width", "3");
        
        pathElem.appendChild(polyline);
        
        // Mettre √† jour le chemin
        updatePathDOM(pathElem, path);
        
        // Ajouter la possibilit√© de supprimer le chemin
        pathElem.addEventListener('mousedown', function(e) {
            if (mapState.currentTool === 'delete') {
                // Supprimer le chemin
                mapElements.removeChild(pathElem);
                mapState.paths = mapState.paths.filter(p => p.id !== path.id);
                saveMapData();
                showNotification("üóëÔ∏è Chemin supprim√©");
            }
        });
        
        // Ajouter au DOM
        mapElements.appendChild(pathElem);
    }
    
    // Fonction pour mettre √† jour un √©l√©ment DOM de chemin
    function updatePathDOM(pathElem, path) {
        const polyline = pathElem.querySelector("polyline");
        let pointsStr = "";
        
        path.points.forEach(point => {
            const screenX = mapToScreenX(point.x);
            const screenY = mapToScreenY(point.y);
            pointsStr += `${screenX},${screenY} `;
        });
        
        polyline.setAttribute("points", pointsStr.trim());
    }
    
    // Fonction pour cr√©er un √©l√©ment DOM de texte
    function createTextDOM(textElement) {
        const textElem = document.createElement('div');
        textElem.className = 'map-text';
        textElem.id = `text-${textElement.id}`;
        textElem.textContent = textElement.text;
        
        // Style
        textElem.style.color = textElement.color;
        
        // Position initiale
        updateTextPosition(textElem, textElement);
        
        // Ajouter la possibilit√© de d√©placer le texte
        textElem.addEventListener('mousedown', function(e) {
            if (mapState.currentTool === 'delete') {
                // Supprimer le texte
                mapElements.removeChild(textElem);
                mapState.texts = mapState.texts.filter(t => t.id !== textElement.id);
                saveMapData();
                showNotification("üóëÔ∏è Texte supprim√©");
                return;
            }
            
            e.stopPropagation();
            const startX = e.clientX;
            const startY = e.clientY;
            const startTextX = textElement.x;
            const startTextY = textElement.y;
            
            function moveText(e) {
                const dx = (e.clientX - startX) / mapState.zoom;
                const dy = (e.clientY - startY) / mapState.zoom;
                
                textElement.x = startTextX + dx;
                textElement.y = startTextY + dy;
                
                updateTextPosition(textElem, textElement);
            }
            
            function stopMoving() {
                document.removeEventListener('mousemove', moveText);
                document.removeEventListener('mouseup', stopMoving);
                saveMapData();
            }
            
            document.addEventListener('mousemove', moveText);
            document.addEventListener('mouseup', stopMoving);
        });
        
        // Ajouter au DOM
        mapElements.appendChild(textElem);
    }
    
    // Fonction pour mettre √† jour la position d'un √©l√©ment de texte
    function updateTextPosition(textElem, textElement) {
        const screenX = mapToScreenX(textElement.x);
        const screenY = mapToScreenY(textElement.y);
        textElem.style.left = `${screenX}px`;
        textElem.style.top = `${screenY}px`;
    }
    
    // Fonction pour mettre √† jour tous les √©l√©ments DOM
    function updateDOMElements() {
        // Mettre √† jour les marqueurs
        mapState.markers.forEach(marker => {
            const markerElem = document.getElementById(`marker-${marker.id}`);
            if (markerElem) {
                updateMarkerPosition(markerElem, marker);
            } else {
                // Si le marqueur n'existe pas dans le DOM, le cr√©er
                createMarkerDOM(marker);
            }
        });
        
        // Mettre √† jour les zones
        mapState.areas.forEach(area => {
            const areaElem = document.getElementById(`area-${area.id}`);
            if (areaElem) {
                updateAreaDOM(areaElem, area);
            } else {
                // Si la zone n'existe pas dans le DOM, la cr√©er
                createAreaDOM(area);
            }
        });
        
        // Mettre √† jour les textes
        mapState.texts.forEach(textElement => {
            const textElem = document.getElementById(`text-${textElement.id}`);
            if (textElem) {
                updateTextPosition(textElem, textElement);
            } else {
                // Si le texte n'existe pas dans le DOM, le cr√©er
                createTextDOM(textElement);
            }
        });
    }
    
    // Fonction pour sauvegarder les donn√©es de la carte
    function saveMapData() {
        const mapData = {
            markers: mapState.markers,
            areas: mapState.areas,
            paths: mapState.paths,
            texts: mapState.texts,
            savedLocations: mapState.savedLocations || []
        };
        
        localStorage.setItem('deadhope-map-data', JSON.stringify(mapData));
    }
    
    // Fonction pour charger les donn√©es de la carte
    function loadMapData() {
        const savedData = localStorage.getItem('deadhope-map-data');
        if (savedData) {
            try {
                const mapData = JSON.parse(savedData);
                
                // Charger les marqueurs
                if (mapData.markers && Array.isArray(mapData.markers)) {
                    mapState.markers = mapData.markers;
                    mapState.markers.forEach(marker => createMarkerDOM(marker));
                }
                
                // Charger les zones
                if (mapData.areas && Array.isArray(mapData.areas)) {
                    mapState.areas = mapData.areas;
                    mapState.areas.forEach(area => createAreaDOM(area));
                }
                
                // Charger les chemins
                if (mapData.paths && Array.isArray(mapData.paths)) {
                    mapState.paths = mapData.paths;
                    mapState.paths.forEach(path => createPathDOM(path));
                }
                
                // Charger les textes
                if (mapData.texts && Array.isArray(mapData.texts)) {
                    mapState.texts = mapData.texts;
                    mapData.texts.forEach(textElement => createTextDOM(textElement));
                }
                
                // Charger les emplacements sauvegard√©s
                if (mapData.savedLocations && Array.isArray(mapData.savedLocations)) {
                    mapState.savedLocations = mapData.savedLocations;
                    renderSavedLocations();
                }
                
                renderMap();
                showNotification('üó∫Ô∏è Carte charg√©e');
            } catch (e) {
                console.error('Erreur lors du chargement des donn√©es de la carte', e);
                showNotification('‚ö†Ô∏è Erreur lors du chargement des donn√©es de la carte');
            }
        }
    }
    
    // Fonction pour sauvegarder un emplacement
    function saveLocation(name, description, coords) {
        if (!mapState.savedLocations) {
            mapState.savedLocations = [];
        }
        
        const location = {
            id: Date.now().toString(),
            name,
            description,
            x: coords.x,
            y: coords.y
        };
        
        mapState.savedLocations.push(location);
        renderSavedLocations();
        saveMapData();
        showNotification(`üìç Emplacement "${name}" sauvegard√©`);
    }
    
    // Fonction pour afficher les emplacements sauvegard√©s
    function renderSavedLocations() {
        const container = document.getElementById('saved-locations');
        container.innerHTML = '';
        
        if (!mapState.savedLocations || mapState.savedLocations.length === 0) {
            container.innerHTML = '<p>Aucun emplacement sauvegard√©</p>';
            return;
        }
        
        mapState.savedLocations.forEach(location => {
            const locationElem = document.createElement('div');
            locationElem.className = 'saved-location-item';
            locationElem.innerHTML = `
                <div class="saved-location-name">${location.name}</div>
                <div class="saved-location-coords">X: ${Math.floor(location.x)}, Y: ${Math.floor(location.y)}</div>
                ${location.description ? `<div class="saved-location-desc">${location.description}</div>` : ''}
                <button class="small-button delete-location" data-id="${location.id}">Supprimer</button>
            `;
            
            // Aller √† l'emplacement lorsqu'on clique dessus
            locationElem.addEventListener('click', function(e) {
                // Ne pas d√©clencher si on clique sur le bouton supprimer
                if (e.target.classList.contains('delete-location')) return;
                
                mapState.mapCenter = { x: location.x, y: location.y };
                renderMap();
                showNotification(`üß≠ Carte centr√©e sur "${location.name}"`);
            });
            
            // G√©rer le bouton de suppression
            const deleteButton = locationElem.querySelector('.delete-location');
            deleteButton.addEventListener('click', function(e) {
                e.stopPropagation();
                mapState.savedLocations = mapState.savedLocations.filter(loc => loc.id !== location.id);
                renderSavedLocations();
                saveMapData();
                showNotification(`üóëÔ∏è Emplacement "${location.name}" supprim√©`);
            });
            
            container.appendChild(locationElem);
        });
    }
    
    // Fonction pour convertir une couleur hexad√©cimale en RGBA
    function hexToRGBA(hex, alpha = 1) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }
    
    // Fonction pour afficher une notification
    function showNotification(message) {
        // V√©rifier si la fonction showNotification existe d√©j√† dans le code global
        if (typeof window.showNotification === 'function') {
            window.showNotification(message);
        } else {
            // Utiliser une impl√©mentation basique si la fonction n'existe pas
            console.log(message);
            
            // Cr√©er un √©l√©ment de notification si la structure existe
            const notificationArea = document.querySelector('.notification-area');
            if (notificationArea) {
                const notification = document.createElement('div');
                notification.className = 'notification';
                notification.textContent = message;
                notificationArea.appendChild(notification);
                
                // Supprimer la notification apr√®s 5.5 secondes
                setTimeout(() => {
                    notification.remove();
                }, 5500);
            }
        }
    }
});
</script>
                            <td><input type="text" placeholder="Nom du lieu"></td>
                            <td>
                                <select>
                                    <option value="1">‚≠ê Faible</option>
                                    <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                                    <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du lieu"></td>
                            <td>
                                <select>
                                    <option value="1">‚≠ê Faible</option>
                                    <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                                    <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
                        </tr>
                        <tr>
                            <td><input type="text" placeholder="Nom du lieu"></td>
                            <td>
                                <select>
                                    <option value="1">‚≠ê Faible</option>
                                    <option value="2">‚≠ê‚≠ê Mod√©r√©e</option>
                                    <option value="3">‚≠ê‚≠ê‚≠ê √âlev√©e</option>
                                    <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê Tr√®s √©lev√©e</option>
                                    <option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Extr√™me</option>
                                </select>
                            </td>
                            <td><input type="text" placeholder="Informations suppl√©mentaires"></td>
                        </tr>
                    </tbody>
